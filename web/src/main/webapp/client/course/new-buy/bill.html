<!-- 结账 -->
<div id="customer-new-buy-project-bill-body" style="z-index: 9999;">
    <div id="offer" class="newCustomers_maskLayer" style="display: block;">
        <div class="newCustomers_maskLayer_box">
            <div class="newCustomers_maskLayer_box_top">
                <span>结账</span><a href="javascript:;" class="newCustomers_maskLayer_X" @click="deleteBillHtml">X</a>
            </div>
            <div class="newCustomers_maskLayer_box_shen">
                <fieldset class="section2">
                    <legend>消费人员信息</legend>
                    <div>
                        <span>会员姓名：<strong v-text="formData.userInfo.data.clientName"></strong></span>
                        <span>手机号码：<strong v-text="formData.userInfo.data.mobile"></strong></span>
                        <span>性别：<strong v-text="formData.userInfo.data.sex == 1 ? '女' : '男'"></strong></span>
                    </div>
                </fieldset>
                <fieldset class="section3">
                    <legend>产品信息</legend>
                    <div class="section3_box">
                        <div class="section3_box_top">
                            <span>订单编号：<strong v-text="formData.orderInfo.orderNo"> </strong> </span>
                            <span>创建时间：</span><span v-text="formData.orderInfo.createDate"></span>
                        </div>

                        <div class="section3_box_botton">
                            <div class="section3_box_botton_left">
                                <img src="../img/u601.png" alt="">
                            </div>
                            <div class="section3_box_botton_rigth">

                                <div>
                                    <strong v-text="formData.orderInfo.data.project"></strong>
                                    <span>单价：<strong>￥</strong></span>
                                    <span><strong v-text="formData.orderInfo.data.price"></strong>
                                    </span>
                                    <span style="margin-left: 7px;">可用数量：
                                        <strong v-text="formData.orderInfo.data.useNum"></strong>
                                    </span>
                                    <span>总价：<strong>￥</strong></span>
                                    <span><strong v-text="formData.orderInfo.data.totalPrice"></strong>
                                    </span>
                                </div>
                                <div>
                                    <span>有效期：
                                        <span style="margin-right: 0;">{{formData.orderInfo.data.beginDate | toFormatDate}}</span>~
                                    <span>{{formData.orderInfo.data.endDate | toFormatDate}}</span>
                                    </span>
                                    <span>购买数量：<span v-text="formData.orderInfo.data.buyNum"></span></span>
                                </div>
                                <div>
                                        <span style="margin-left: 0px;">赠送数量：<span
                                                v-text="formData.orderInfo.data.giftNum"></span></span>
                                </div>


                            </div>

                        </div>
                    </div>
                </fieldset>
                <fieldset class="section4">
                    <legend>结账</legend>
                    <div class="section4_box">
                        <div class="section4_box_top">
                            <div>付款类型：
                                <label>
                                    <input type="radio" name="quan" v-model="formData.payType.index"
                                           value="1" @click="reviewType = ''">全款</label>
                                <label>
                                    <input type="radio" name="quan" v-model="formData.payType.index"
                                           value="2" @click="reviewType = ''">定金</label>
                                <label>
                                    <input type="radio" name="quan" v-model="formData.payType.index"
                                           value="3" @click="reviewType = 'gift'">赠送</label>
                                <label>
                                    <input type="radio" name="quan" v-model="formData.payType.index"
                                           value="4" @click="reviewType = 'replacement'">置换</label>
                                <label>
                                    <input type="radio" name="quan" disabled>分期付款</label>
                            </div>
                        </div>
                        <div class="section4_box_botton">
                            <fieldset v-show="formData.payType.index === '1'">
                                <div style="line-height: 50px !important">
                                    选择全款，请填写对应的支付方式，以及对应支付金额，完成结账！
                                </div>
                            </fieldset>
                            <fieldset v-show="formData.payType.index === '2'">
                                <div>
                                    <label>补余期限：</label>
                                    <label><input type="radio" name="tian" v-model="formData.payType.front.date"
                                                  value="3">3天</label>
                                    <label><input type="radio" name="tian" v-model="formData.payType.front.date"
                                                  value="5">5天</label>
                                    <label><input type="radio" name="tian" v-model="formData.payType.front.date"
                                                  value="7">7天</label>
                                    <label><input type="radio" name="tian" v-model="formData.payType.front.date"
                                                  value="15">15天</label>
                                    <label><input type="radio" name="tian" v-model="formData.payType.front.date"
                                                  value="30">30天</label>
                                    <label><input type="radio" name="tian" v-model="formData.payType.front.date"
                                                  value="90">90天</label>
                                    <label><input type="radio" name="tian" v-model="formData.payType.front.date"
                                                  value="180">180天</label>
                                    <label>
                                        <input type="radio" name="tian" v-model="formData.payType.front.date"
                                               value="other">
                                        <span>其他</span>
                                        <input type="text" name="tian" style="float: none;"
                                               v-model="formData.payType.front.time"
                                               oninput="value=value.replace(/[^\d]+/g,'')"/>
                                        <span style="float: right;">天</span>
                                    </label>
                                </div>
                            </fieldset>
                            <fieldset class="fieldset3" v-show="formData.payType.index === '3'">
                                <div>
                                    赠送人：
                                    <select name="1" v-model="formData.gift.chooseUserId">
                                        <option value="">无</option>
                                        <option v-for='(item,index) in formData.gift.presenter' :value="item.id">
                                            {{item.relName}}
                                        </option>
                                    </select>
                                    输入授权（密码/指纹/指静脉）：
                                    <input type="text" style="float:initial" v-model="formData.gift.fingerprint"
                                           @blur="verifyUser">
                                    <span v-text="formData.gift.msg" :class="formData.gift.class"></span>
                                </div>
                            </fieldset>
                            <fieldset v-show="formData.payType.index === '4'">
                                <div>
                                    <div>
                                        <span> 置换单位名称：</span>
                                        <input type="text" v-model="formData.replacement.unit">
                                        <span>置换方式：</span>
                                        <input type="text" v-model="formData.replacement.way">
                                    </div>
                                    <div>
                                        <span>审核人：</span>
                                        <select name="1" v-model="formData.replacement.chooseUserId">
                                            <option value="">无</option>
                                            <option v-for='(item,index) in formData.replacement.presenter'
                                                    :value="item.id">
                                                {{item.relName}}
                                            </option>
                                        </select>
                                        <span>输入授权（密码/指纹/指静脉）：</span>
                                        <input type="text" v-model="formData.replacement.fingerprint"
                                               @blur="verifyUser">

                                        <span v-text="formData.replacement.msg"
                                              :class="formData.replacement.class"></span>
                                    </div>


                                </div>
                            </fieldset>
                        </div>
                    </div>
                </fieldset>
                <div class="payment_method">
                    <div class="payment_method_top">
                        <ul>
                            <li :class='{on: index == 0}' @click="index = 0">会员消费</li>
                            <li :class='{on: index == 1}' @click="index = 1">普通消费</li>
                            <li style="cursor: not-allowed;">员工领用</li>
                            <li style="cursor: not-allowed;">协议单位</li>
                        </ul>
                    </div>
                    <div class="payment_method_left pull-left">
                        <ul>
                            <!-- 会员消费 -->
                            <li class="on li1" v-if="index==0">
                                <div class="col-md7">
                                    <div class="col_md7_top">卡号/手机号码：
                                        <input type="text" v-model="member.num"
                                               oninput="value=value.replace(/[^\d]+/g,'')">
                                        <a href="javascript:;" class="btn btn-success"
                                           @click="searchByTelAndNo(member.num)">搜索</a>
                                    </div>
                                    <div class="col_md7_botton">
                                        <table class="table table-bordered text-center table-hover">
                                            <thead>
                                            <tr>
                                                <th>序号</th>
                                                <th>票券号码</th>
                                                <th>票券名称</th>
                                                <th>可用权益</th>
                                                <th>使用</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr v-for='(item,index) in member.ticketList'>
                                                <td v-text="index + 1"></td>
                                                <td v-text="item.num"></td>
                                                <td v-text="item.name"></td>
                                                <td v-text="item.interest"></td>
                                                <td><label><input type="checkbox" v-model="item.use"></label></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <div>显示更多</div>
                                    </div>
                                </div>

                                <div class="TCR-table-con2">
                                    <div><span>会员卡号：</span> <strong
                                            class="font-bold">{{member.cardInfo.cardNo}}</strong></div>
                                    <div><span>会员名称：</span> <strong
                                            class="font-bold">{{member.cardInfo.cardUserName}}</strong></div>
                                    <div><span>票劵差价：</span>
                                        <strong class="font-bold col-red">{{member.cardInfo.differencePrice|toManey}}</strong>
                                    </div>
                                    <div><span>票劵抵扣：</span>
                                        <strong class="font-bold col-red">{{member.cardInfo.totalPrice|toManey}}</strong>
                                    </div>
                                    <div><span>卡中储值金额：</span>
                                        <strong class="font-bold col-red">{{member.cardInfo.storageOrderPrice|toManey}}</strong>
                                    </div>
                                    <div><span>扣储值金额：</span>
                                        <input type="text" v-model="member.cardInfo.inputMoney" placeholder="0.00"
                                               oninput="value=value.replace(/[^\d^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.')"
                                        ></div>
                                    <div><span>输入凭证：</span>
                                        <input type="password" v-model="member.cardInfo.userPass"
                                               @change="verifyPassword"></div>
                                </div>
                            </li>
                            <!-- 普通消费 -->
                            <li class="on li2" v-if="index==1">
                                <div class="col-md7">
                                    <div class="col_md7_top">手机号码：
                                        <input type="text" v-model="member.mobile"
                                               oninput="value=value.replace(/[^\d]+/g,'')">
                                        <a href="javascript:;" class="btn btn-success"
                                           @click="searchByTelAndNo(member.mobile)">搜索</a>
                                    </div>
                                    <div class="col_md7_botton">
                                        <table class="table table-bordered text-center table-hover">
                                            <thead>
                                            <tr>
                                                <th>序号</th>
                                                <th>票券号码</th>
                                                <th>票券名称</th>
                                                <th>可用权益</th>
                                                <th>使用</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr v-for='(item,index) in member.ticketListGeneral'>
                                                <td v-text="index + 1"></td>
                                                <td v-text="item.num"></td>
                                                <td v-text="item.name"></td>
                                                <td v-text="item.interest"></td>
                                                <td><label><input type="checkbox" v-model="item.use"></label></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <div>显示更多</div>
                                    </div>
                                </div>

                                <div class="col-md5">
                                    <div>
                                        <div>票券可用总权益：<strong>{{member.generalCardInfo.totalPrice|toManey}}</strong>
                                        </div>
                                        <div>输入使用权益：<input type="text"
                                                           oninput="value=value.replace(/[^\d^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.')"
                                                           v-model="member.generalCardInfo.inputMoney"></div>
                                        <div>需补差价：<strong>{{member.generalCardInfo.differencePrice|toManey}}</strong>
                                        </div>
                                        <fieldset>
                                            <legend>普通消费说明</legend>
                                            <div>
                                                <p>1、本阶段只支持系统存在的潜在客户消费;</p>
                                                <p>2、如果系统不存在的客户想用票券消费;</p>
                                                <div>
                                                    <p>1）新建潜在客户必须要有手机号码、姓名；</p>
                                                    <p>2）销售/赠送票券;</p>
                                                    <p>3）在本届面录入手机号码，如果有消费权益就会自动带出 ;</p>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="payment_method_box pull-left">
                        <fieldset style="border-color:red">
                            <legend style="color:#FF9900">支付方式</legend>
                            <div class="section2_boxs1_right">
                                <div class="section2_boxs1_top">
                                    <div>支付方式</div>
                                    <div>支付宝</div>
                                    <div>刷卡</div>
                                    <div>微信</div>
                                    <div>现金</div>
                                    <div>转账</div>
                                    <div>花呗</div>
                                    <div>其他支付</div>
                                </div>
                                <div class="section2_boxs1_botton">
                                    <div>金额</div>
                                    <div><span>￥</span>
                                        <input type="text" v-model="member.payType.p1" placeholder="0.00"
                                               oninput="value=value.replace(/[^\d^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.')">
                                    </div>
                                    <div><span>￥</span>
                                        <input type="text" v-model="member.payType.p2" placeholder="0.00"
                                               oninput="value=value.replace(/[^\d^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.')">
                                    </div>
                                    <div><span>￥</span>
                                        <input type="text" v-model="member.payType.p3" placeholder="0.00"
                                               oninput="value=value.replace(/[^\d^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.')">
                                    </div>
                                    <div><span>￥</span>
                                        <input type="text" v-model="member.payType.p4" placeholder="0.00"
                                               oninput="value=value.replace(/[^\d^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.')">
                                    </div>
                                    <div><span>￥</span>
                                        <input type="text" v-model="member.payType.p5" placeholder="0.00"
                                               oninput="value=value.replace(/[^\d^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.')">
                                    </div>
                                    <div><span>￥</span>
                                        <input type="text" v-model="member.payType.p6" placeholder="0.00"
                                               oninput="value=value.replace(/[^\d^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.')">
                                    </div>
                                    <div><span>￥</span>
                                        <input type="text" v-model="member.payType.p7" placeholder="0.00"
                                               oninput="value=value.replace(/[^\d^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.')">
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    <div class="payment_method_rigth pull-left">
                        <fieldset>
                            <legend style="color:#FF9900">折扣优惠</legend>
                            <table border="0" cellspacing="0" cellpadding="0">
                                <tbody>
                                <tr>
                                    <td colspan="2">整单打折</td>
                                </tr>
                                <tr>
                                    <td>优惠折扣：</td>
                                    <td><input type="text" v-model="member.rebate.offer" placeholder="0"
                                               oninput="value=value.replace(/[^\d^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.')">
                                    </td>
                                </tr>
                                <tr>
                                    <td>整单去零：</td>
                                    <td><input type="text" v-model="member.rebate.integer" placeholder="0"
                                               oninput="value=value.replace(/[^\d^]+/g,'')"></td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <label>
                                            <input type="radio" name="discount-type-radio" v-model="member.rebate.type"
                                                   value="1">
                                            <span>整单打折(重复使用)</span>
                                        </label>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-align-right">满：</td>
                                    <td class="text-align-right">
                                        <input type="text" v-model="member.rebate.repeat.full" placeholder="0"
                                               oninput="value=value.replace(/[^\d^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.')">
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-align-right">减：</td>
                                    <td class="text-align-right">
                                        <input type="text" v-model="member.rebate.repeat.less" placeholder="0"
                                               oninput="value=value.replace(/[^\d^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.')">
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <label>
                                            <input type="radio" name="discount-type-radio" value="0"
                                                   v-model="member.rebate.type">
                                            <span>整单打折(单次使用)</span>
                                        </label>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-align-right">满：</td>
                                    <td>
                                        <input type="text" v-model="member.rebate.single.full" placeholder="0"
                                               oninput="value=value.replace(/[^\d^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.')">
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-align-right">减：</td>
                                    <td>
                                        <input type="text" v-model="member.rebate.single.less" placeholder="0"
                                               oninput="value=value.replace(/[^\d^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.')">
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </fieldset>
                    </div>
                    <div class="payment_method_rigth2 pull-left">
                        <fieldset style="border-color:#009900">
                            <legend style="color:#009900">支付详情</legend>
                            <div class="rows">
                                <div>
                                    <div class="col-md-6">小计：</div>
                                    <div class="col-md-6"> ￥<strong>{{member.payMoney.totalPrice | toManey}}</strong>
                                    </div>
                                </div>
                                <div>
                                    <div class="col-md-6">折扣/优惠：</div>
                                    <div class="col-md-6">￥<strong>{{member.payMoney.discount | toManey}}</strong></div>
                                </div>
                                <div>
                                    <div class="col-md-6">抵扣金额：</div>
                                    <div class="col-md-6">￥<strong>{{member.payMoney.discountMoney | toManey}}</strong>
                                    </div>
                                </div>
                                <div>
                                    <div class="col-md-6">应付金额：</div>
                                    <div class="col-md-6">￥ <strong><span class="tored">{{member.payMoney.price | toManey}}</span></strong>
                                    </div>
                                </div>
                                <div>
                                    <div class="col-md-6">未付金额：</div>
                                    <div class="col-md-6">￥{{member.payMoney.noPrice | toManey}}</div>
                                </div>
                                <div>
                                    <div class="col-md-6">找零：</div>
                                    <div class="col-md-6">￥<strong><span class="tored">{{member.payMoney.retChange | toManey}}</span></strong>
                                    </div>
                                </div>
                                <div style=" border-bottom: none">
                                    <div class="col-md-6"><a href="javascript:;" class="btn btn-default">挂账</a></div>
                                    <div class="col-md-6"><a href="javascript:;" class="btn btn-default">挂单</a></div>
                                </div>
                                <div style=" border-bottom: none">
                                    <div class="col-md-12">
                                        <a href="javascript:;" class="btn btn-success" @click="save">结账</a>
                                    </div>
                                </div>
                                <div style=" border-bottom: none">
                                    <div class="col-md-12">
                                        <label>
                                            <input type="checkbox" v-model="InvoiceStatus">
                                            <span>购置发票</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--表格1 输入手机号码显示-->
    <div class="newCustomers_maskLayer performance" v-show="member.isShow" style="display:block;">
        <div class="newCustomers_maskLayer_box" style="top: 55%;">
            <div class="newCustomers_maskLayer_box_top"><span>多个客户选择</span>
                <a href="javascript:;" class="newCustomers_maskLayer_X" @click="member.isShow = false;">X</a>
            </div>
            <div class="KHGL-table-box">
                <table class="KHGL-table1" border="0" cellspacing="0" cellpadding="0">
                    <thead>
                    <tr>
                        <th style="width: 15%;">选择</th>
                        <th style="width: 15%;">标识</th>
                        <th style="width: 25%;">姓名</th>
                        <th style="width: 15%;">性别</th>
                        <th>创建时间</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr v-for="item in member.optionClientList">
                        <td><span class="col-green" @click="catcherClientList(item)">选择</span></td>
                        <td><span class="col-red" v-text="item.CustomerMark"></span></td>
                        <td v-text="item.clientName"></td>
                        <td v-text="item.sex == 1 ? '女' : '男'"></td>
                        <td>{{item.applyTime|formatDate }}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- 表格1 -->

    <!-- 选择储值会员卡 -->
    <div class="newCustomers_maskLayer performance" v-show="member.memberCard.isShow" style="display: block;">
        <div class="newCustomers_maskLayer_box" style="top: 65%;">
            <div class="newCustomers_maskLayer_box_top"><span>选择储值会员卡</span>
                <a href="javascript:;" @click="member.memberCard.isShow = false;" class="newCustomers_maskLayer_X"
                   @click="colseX('clientCardList')">X</a>
            </div>
            <h5 class="KHGL-title">选择要储值的会员卡</h5>
            <div class="KHGL-table-box">
                <table class="KHGL-table2" border="0" cellspacing="0" cellpadding="0">
                    <thead>
                    <tr>
                        <th style="width: 5%;">选择</th>
                        <th style="width: 10%;">姓名</th>
                        <th style="width: 12%;">手机号码</th>
                        <th style="width: 12%;">卡系列</th>
                        <th style="width: 7%;">卡名称</th>
                        <th style="width: 15%;">开始日期</th>
                        <th style="width: 15%;">失效日期</th>
                        <th style="width: 8%;">剩余权益</th>
                        <th style="width: 8%;">剩余储值</th>
                        <th>状态</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr v-for="item in member.memberCard.optionClientCardList">
                        <td class="cursorP" style="color: #090 !important;" @click="catcherCardId(item)">选择</td>
                        <td class='col-blue'>{{item.clientName}}</td>
                        <td>{{item.mobile}}</td>
                        <td>{{item.cardFlag}}</td>
                        <td class='col-red'>{{item.cardTypeName}}</td>
                        <td>{{item.bindTime | formatDate}}</td>
                        <td>{{item.invalidTime|formatDate}}</td>
                        <td>{{item.orderNum}}</td>
                        <td>{{item.orderPrice}}</td>
                        <td>{{item.a_status}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    {{formData.replacement.chooseUserId}}-----
    <!-- end 选择储值会员卡 -->
</div>

<!-- 结账 -->

<script>

    var billVue = new Vue({
        el: '#customer-new-buy-project-bill-body',
        data: {
            billStatus: '',//判断是课程还是套餐
            index: 0, // tab的index
            reviewType: '', //审核类型
            InvoiceStatus: '', //购置税发票
            formData: {//页面表单的数据
                orderInfo: {//订单信息
                    orderNo: '', //订单编号
                    createDate: '',
                    data: {//产品信息
                    },
                },
                userInfo: { //用户信息
                    userId: $.cookie('cid'), //用户ID
                    data: {}, //存放用户的信息

                },
                payType: {//付款类型
                    index: '1', //结账付款类型的序号
                    front: {//选择定金
                        date: '', //选择时间
                        time: '', //金额
                        selectTime: '', //选择的时间
                    },
                },
                gift: {//赠送
                    chooseUserId: '', //选择人Id
                    presenter: headVue.marketUserList, //赠送人列表
                    fingerprint: '', //指纹密码
                    msg: '', //验证信息
                    class: '', //验证的class
                    status: false, //验证状态
                },
                replacement: {//置换
                    chooseUserId: '', //选择人Id
                    unit: '', //置换单位名称
                    way: '', //置换方式
                    presenter: headVue.marketUserList, //赠送人列表
                    fingerprint: '', //指纹密码
                    msg: '', //验证信息
                    class: '', //验证的class
                    status: false, //验证状态
                }
            },
            member: {//会员消费
                num: '13012345674', //电话，卡号
                mobile: '13012345674', //电话
                isShow: false, // 显示弹出框
                optionClientList: [], //查出来的用户列表
                memberCard: { //会员卡字段
                    isShow: false, //显示
                    optionClientCardList: [], //会员卡信息

                },
                ticketList: [//会员票据列表
                    {num: '1', name: '1', interest: '22', differ: 20, use: false},
                    {num: '2', name: '1', interest: '1', "differ": 20, use: false},
                    {num: '3', name: '1', interest: '43', "differ": 20, use: false},
                    {num: '4', name: '1', interest: '21', "differ": 20, use: false}
                ],
                ticketListGeneral: [//普通票据列表
                    {num: '1', name: '1', interest: '22', "differ": 20, use: false},
                    {num: '2', name: '1', interest: '1', "differ": 20, use: false},
                    {num: '3', name: '1', interest: '43', "differ": 20, use: false},
                    {num: '4', name: '1', interest: '21', "differ": 20, use: false}
                ],
                generalCardInfo: { //普通消费的会员卡信息
                    totalPrice: 0,//选中的票卷金额
                    selectTotalPrice: 0, //选中的金额
                    differencePrice: 0, //票卷差价
                    inputMoney: '', //输入要抵扣的储存金额
                    isSuccess: false, //输入成功
                },
                cardInfo: {//卡的信息
                    storageOrderPrice: 0, //票卷选中的会员卡的有效储值金额
                    cardNo: '未选择会员卡', //票卷选中的会员卡号  ------未选择会员卡
                    cardId: '', //票卷选中的会员卡号Id
                    cardUserName: '--',//票卷选中的会员卡客户名称
                    differencePrice: 0, //票卷差价
                    totalPrice: 0, //选中的票卷金额
                    selectTotalPrice: 0, //选中的金额
                    userPass: '', //输入用户明码
                    userPassStatus: false, //用户密码验证
                    inputMoney: '', //输入要抵扣的储存金额
                    isSuccess: false, //输入成功
                },
                payType: {// 支付方式
                    p1: '',
                    p2: '',
                    p3: '',
                    p4: '',
                    p5: '',
                    p6: '',
                    p7: '',
                    payStatus: '0',// 付款方式
                },
                rebate: {//优惠折扣
                    currentTotalMoney: 0, //当前总金额
                    offer: '', //优惠折扣
                    integer: '', //整单去零
                    type: '', //整单打折 重复单/次 1/0 重复/单次
                    repeat: {//重复
                        full: '',//满
                        less: '',//减
                    },
                    single: {//单次
                        full: '',//满
                        less: '',//减
                    }
                },
                payMoney: {
                    totalPrice: 0,        //小计 = 实际应付金额 + 票卷差价（默认差价0）
                    discount: 0,           //折扣优惠
                    discountMoney: 0,       //抵扣金额
                    price: 0,          //应付金额
                    noPrice: 0,            //未付金额
                    retChange: 0,          //找零
                },

            },

        },
        computed: {},
        filters: {
            formatDate: function (time, type, typeT) {
                if (!time) {
                    return '';
                }
                var _time = timeFormatDate(time, type, typeT);
                return _time;
            },
            toFormatDate(val){
                let date = new Date(val);
                return formatDate(date)
            },
            toManey: function (val) {
                if (!val || 'undefined' == typeof(val)) {
                    return parseFloat(0).toFixed(2);
                    ;
                }
                return parseFloat(val).toFixed(2);
            },
        },
        watch: {
            'index'(val){
                //如果导航栏改变，则触发选择的票券
                if (val === 0) {
                    $.each(this.member.ticketListGeneral, (i, d) => {
                        d.use = false;
                    });
                }
                if (val === 1) {
                    $.each(this.member.ticketList, (i, d) => {
                        d.use = false;
                    });
                }
            },
            'formData.gift.chooseUserId'(val){ //增送下拉框触发
                this.verifyUser();
            },
            'formData.replacement.chooseUserId'(val){//置换下拉框触发
                this.verifyUser();
            },
            'member.cardInfo.inputMoney'(val, oldVal){ //监控输入的储存金额
                if (parseFloat(val) > parseFloat(this.member.cardInfo.storageOrderPrice)) {
                    this.member.cardInfo.inputMoney = oldVal;
                    return false;
                }
                this.member.cardInfo.isSuccess = true; //成功
            },
            'member.generalCardInfo.inputMoney'(val, oldVal){ //输入使用权益
                if (parseFloat(val) > parseFloat(this.member.generalCardInfo.totalPrice)) {
                    this.member.generalCardInfo.inputMoney = oldVal;
                    return false;
                }
                this.member.payMoney.discountMoney = this.member.generalCardInfo.totalPrice +
                    parseFloat(val ? val : 0);
            },
            'member.ticketList': {//计算数组票据列表的变化
                handler: function (value, oldVal) {
                    this.member.cardInfo.totalPrice = 0;
                    this.member.cardInfo.differencePrice = 0;
                    $.each(value, (i, d) => {
                        if (d.use === true) {
                            //
                            this.member.cardInfo.totalPrice += parseFloat(d.interest);
                            this.member.cardInfo.differencePrice += parseFloat(d.differ);
                        }
                    });
                    //差价添加进小计
                    this.member.payMoney.totalPrice = this.formData.orderInfo.data.totalPrice + this.member.cardInfo.differencePrice;
                    this.member.cardInfo.selectTotalPrice = this.member.cardInfo.totalPrice;
                    if (this.member.cardInfo.userPassStatus == true && parseFloat(this.member.cardInfo.inputMoney) > 0) {
                        this.member.payMoney.discountMoney = parseFloat(this.member.cardInfo.inputMoney) + this.member.cardInfo.selectTotalPrice;
                    } else {
                        this.member.payMoney.discountMoney = this.member.cardInfo.selectTotalPrice;
                    }


                },
                deep: true,
            },
            'member.ticketListGeneral': {//计算数组票据列表的变化
                handler: function (value, oldVal) {
                    this.member.generalCardInfo.totalPrice = 0;
                    this.member.generalCardInfo.differencePrice = 0;
                    $.each(value, (i, d) => {
                        if (d.use === true) {
                            //
                            this.member.generalCardInfo.totalPrice += parseFloat(d.interest);
                            this.member.generalCardInfo.differencePrice += parseFloat(d.differ);
                        }
                    });
                    //差价添加进小计
                    this.member.payMoney.totalPrice = this.formData.orderInfo.data.totalPrice + this.member.generalCardInfo.differencePrice;
                    this.member.cardInfo.selectTotalPrice = this.member.generalCardInfo.totalPrice;

                    //再加上使用权益
                    this.member.payMoney.discountMoney = this.member.generalCardInfo.totalPrice +
                        parseFloat(this.member.generalCardInfo.inputMoney ? member.generalCardInfo.inputMoney : 0);
                },
                deep: true,
            },
            'member.rebate': {
                handler(rebate){
                    let currentTotalMoney = this.member.payMoney.totalPrice; //当前折扣后的钱
                    let offerMoney = 0; //当前优惠的钱
                    //先计算打折
                    let offer = rebate.offer;
                    let integer = rebate.integer;
                    let full = 0, less = 0, type = rebate.type;
                    //优惠折扣
                    if (offer && offer !== '0') {
                        offerMoney = (currentTotalMoney * (1 - (parseFloat(offer) / 10))).toFixed(2);
                        currentTotalMoney = currentTotalMoney - offerMoney; //折扣后剩下
                    }
                    //整单去零
                    if (integer && parseInt(integer) > 0) {
                        offerMoney = parseFloat(offerMoney) + parseInt(integer);
                        currentTotalMoney = currentTotalMoney - parseInt(integer);
                    }
                    if (type === "1") {//重复
                        this.member.rebate.single.full = '';
                        this.member.rebate.single.less = '';
                        full = this.member.rebate.repeat.full;
                        less = this.member.rebate.repeat.less;
                        full = full ? full : 0;
                        less = less ? less : 0;
                        full = parseFloat(full);
                        less = parseFloat(less);
                        if (full > 0 && full <= currentTotalMoney) {
                            let rate = parseInt(currentTotalMoney / full);
                            offerMoney = parseFloat(offerMoney) + parseFloat((rate * less).toFixed(2));
                        }
                    }
                    if (type === "0") {//单次
                        this.member.rebate.repeat.full = '';
                        this.member.rebate.repeat.less = '';
                        full = this.member.rebate.single.full;
                        less = this.member.rebate.single.less;
                        full = full ? full : 0;
                        less = less ? less : 0;
                        full = parseFloat(full);
                        less = parseFloat(less);
                        if (full > 0 && full <= currentTotalMoney) {
                            offerMoney = (parseFloat(offerMoney) + less).toFixed(2);
                        }
                    }
                    this.member.payMoney.discount = offerMoney;
                },
                deep: true,
            },
            'member.payMoney.totalPrice'(val){
                //计算应付金额
                let price = (parseFloat(val) -
                parseFloat(this.member.payMoney.discount) -
                parseFloat(this.member.payMoney.discountMoney)).toFixed(2);
                this.member.payMoney.price = price <= 0 ? 0 : price;
            },
            'member.payMoney.discount'(val){
                //计算应付金额
                let price = (parseFloat(this.member.payMoney.totalPrice) -
                parseFloat(val) -
                parseFloat(this.member.payMoney.discountMoney)).toFixed(2);
                this.member.payMoney.price = price <= 0 ? 0 : price;
            },
            'member.payMoney.discountMoney'(val){
                //计算应付金额
                let price = (parseFloat(this.member.payMoney.totalPrice) -
                parseFloat(this.member.payMoney.discount) -
                parseFloat(val)).toFixed(2);
                this.member.payMoney.price = price <= 0 ? 0 : price;
            },
            'member.payType': {
                handler: function (value, oldVal) {
                    let p1 = value.p1 ? value.p1 : 0,
                        p2 = value.p2 ? value.p2 : 0,
                        p3 = value.p3 ? value.p3 : 0,
                        p4 = value.p4 ? value.p4 : 0,
                        p5 = value.p5 ? value.p5 : 0,
                        p6 = value.p6 ? value.p6 : 0,
                        p7 = value.p7 ? value.p7 : 0;
                    let money = parseFloat(p1) +
                        parseFloat(p2) +
                        parseFloat(p3) +
                        parseFloat(p4) +
                        parseFloat(p5) +
                        parseFloat(p6) +
                        parseFloat(p7);
                    let end = (parseFloat(this.member.payMoney.price) - money).toFixed(2);
                    if (end < 0) {
                        this.member.payMoney.noPrice = 0;
                        this.member.payMoney.retChange = 0 - end;
                    } else {
                        this.member.payMoney.noPrice = end;
                        this.member.payMoney.retChange = 0;
                    }
                    if (money > 0) { //有付款表明已经付款

                        this.member.payType.payStatus = '1';
                    } else {
                        this.member.payType.payStatus = '0';
                    }


                },
                deep: true,
            },
            'member.payMoney.price'(val){
                let price = parseFloat(val);
                let value = this.member.payType;
                let p1 = value.p1 ? value.p1 : 0,
                    p2 = value.p2 ? value.p2 : 0,
                    p3 = value.p3 ? value.p3 : 0,
                    p4 = value.p4 ? value.p4 : 0,
                    p5 = value.p5 ? value.p5 : 0,
                    p6 = value.p6 ? value.p6 : 0,
                    p7 = value.p7 ? value.p7 : 0;
                let money = parseFloat(p1) +
                    parseFloat(p2) +
                    parseFloat(p3) +
                    parseFloat(p4) +
                    parseFloat(p5) +
                    parseFloat(p6) +
                    parseFloat(p7);
                let end = (price - money).toFixed(2);
                if (end < 0) {
                    this.member.payMoney.noPrice = 0;
                    this.member.payMoney.retChange = 0 - end;
                } else {
                    this.member.payMoney.noPrice = end;
                    this.member.payMoney.retChange = 0;
                }
            },
            'formData.payType.front.date'(val){
                if(val !== 'other'){
                    this.formData.payType.front.selectTime = val;
                }else{
                    this.formData.payType.front.selectTime = '0';
                }
            },
            'formData.payType.front.time'(val){
                this.formData.payType.front.selectTime = val;
            }
        },
        created: function () {
            //初始化加载用户信息
            this.load(); //初始化加载用户信息
            this.billStatus = newBuyVue.billStatus; //加载状态项
            //加载项目，套餐
            if (this.billStatus === "package") { //套餐选择
                let totalPrice = parseInt(packageVue.formData.salesNum | 0) * parseFloat(packageVue.formData.projectPrice ? packageVue.formData.projectPrice : 0);

                this.formData.orderInfo.data = {
                    project: packageVue.selectData.project,
                    projectId: packageVue.selectData.projectId,
                    price: packageVue.formData.projectPrice,
                    beginDate: packageVue.formData.beginDate, //开始时间
                    endDate: packageVue.formData.endDate, //结束时间
                    totalPrice: totalPrice,
                    useNum: packageVue.formData.salesNum ? packageVue.formData.salesNum : 0,
                    buyNum: 0,
                    giftNum: 0,
                    courseId: packageVue.selectData.courseId, //课程id
                    courseSeriesId: packageVue.selectData.courseSeriesId, //课程系列id
                    validityPeriod: packageVue.formData.validityPeriodTime, //有效期
                    cardId: packageVue.formData.validityPeriod == 'all'? packageVue.formData.cardId: '', //卡号


                };
            }
            if (this.billStatus === "project") { //项目，产品
                let num = parseInt(projectVue.formData.buyNum || 0) + parseInt(projectVue.formData.giftNum || 0);
                let price = parseFloat(projectVue.formData.projectPrice ? projectVue.formData.projectPrice : 0);
                let totalPrice = num * price; //总价
                this.formData.orderInfo.data = {
                    project: projectVue.selectData.project,
                    projectId: projectVue.selectData.projectId,
                    price: projectVue.formData.projectPrice,
                    useNum: projectVue.formData.useNum ? projectVue.formData.useNum : 0,
                    totalPrice: totalPrice,
                    beginDate: projectVue.formData.beginDate, //开始时间
                    endDate: projectVue.formData.endDate, //结束时间
                    buyNum: projectVue.formData.buyNum ? projectVue.formData.buyNum : 0,// 购买数量
                    giftNum: projectVue.formData.giftNum ? projectVue.formData.giftNum : 0,// 赠送数量
                    courseId: projectVue.selectData.courseId, //课程id
                    courseSeriesId: projectVue.selectData.courseSeriesId, //课程系列id
                    validityPeriod: projectVue.formData.validityPeriodTime, //有效期
                    cardId: projectVue.formData.validityPeriod == 'all'? projectVue.formData.cardId: '', //卡号

                }


            }


            //总价/小计的金额
            this.member.payMoney.totalPrice = this.formData.orderInfo.data.totalPrice ? this.formData.orderInfo.data.totalPrice : 0;
            //当前总金额
            this.member.rebate.currentTotalMoney = this.member.payMoney.totalPrice;
        },
        methods: {
            //初始化加载
            load(){
                //订单编号
                axiosGetFetch(COURSE_URL.getOrderNo, (response) => {
                    if (response.code === '200') {
                        let date = new Date();
                        //时间，小时前面不够补 '0'
                        this.formData.orderInfo.createDate = date.getFullYear() + "-" + (date.getMonth() + 1) + "-" + date.getDate() +
                            " " + (date.getHours() < 10 ? ("0" + date.getHours()) : date.getHours()) + ":" + date.getMinutes();
                        this.formData.orderInfo.orderNo = response.data;
                    }
                });
                //用户信息
                axiosGetParams(COURSE_URL.fetchUserInfo, {id: this.formData.userInfo.userId}, (response) => {
                    if (response.code === '200') {
                        this.formData.userInfo.data = response.data;
                    }
                });
            },
            //物理删除的方式删除该弹窗的全部html
            deleteBillHtml(){
                $('#customer-new-buy-project-bill-body').remove();
            },
            //员工的验证
            verifyUser(){
                let param = {}; //参数传递
                //判断当前选择的是赠送还是置换
                if (!this.reviewType) {
                    this.showPrompt('', '');//不做校样
                    return false; //说明没有选择到制定的赠送或者置换
                }
                if (this.reviewType === "gift") { //赠送类型
                    if (!this.formData.gift.chooseUserId || !this.formData.gift.fingerprint) { //必须都有存在
                        this.showPrompt('', '');//不做校样
                        return false;
                    }
                    param.PassWord = this.formData.gift.fingerprint;
                    param.id = this.formData.gift.chooseUserId;
                }
                //判断是否选择人员
                if (this.reviewType === "replacement") { //赠送类型
                    if (!this.formData.replacement.chooseUserId || !this.formData.replacement.fingerprint) { //必须都有存在
                        this.showPrompt('', '');//不做校样
                        return false;
                    }
                    param.PassWord = this.formData.gift.fingerprint;
                    param.id = this.formData.gift.chooseUserId;
                }
                //  console.log('执行验证操作')
                param.customerCode = $.cookie('code');
                //param.ShopId = $.cookie('shopid');
                param.ShopId = headVue.shopId;
                //开始验证 verifyPersonInfo
                axiosPostParams(COURSE_URL.verifyPersonInfo, param, (response) => {
                    if (response.code === '200') {
                        this.showPrompt(response.data, 'verify-success', true)
                    } else {
                        this.showPrompt(response.msg, 'verify-error', false)
                    }

                });
            },
            //提示框归类
            showPrompt(msg, className, status){
                if (this.reviewType === "gift") {
                    this.formData.gift.msg = msg;
                    this.formData.gift.class = className;
                    this.formData.gift.status = status;
                }
                if (this.reviewType === "replacement") {
                    this.formData.replacement.msg = msg;
                    this.formData.replacement.class = className;
                    this.formData.replacement.status = status;

                }
            },
            //根据卡号，电话号码查询
            searchByTelAndNo(num){
                //判断手机号码是否有输入
                if (num == "") {
                    return false;
                }
                //15345982222
                let param = {
                    mobile: this.member.num,
                    CustomerCode: $.cookie('code')
                };
                this.member.isShow = true;
                axiosGetParams(COURSE_URL.getClientListByMobile, param, (response) => {
                    if (response.code === '200') {
                        this.member.optionClientList = response.data;//导入值
                        this.member.isShow = true; //显示弹出框
                    }
                });
            },
            //选择客户，查询会员卡
            catcherClientList(item){
                let param = {
                    page: -1,
                    rows: -1,
                    clientId: item.id,
                    CustomerCode: $.cookie('code'),
                };
                //设置会员卡名称
                this.member.cardInfo.cardUserName = item.clientName;
                jqueryPostParams(COURSE_URL.getCardListByMobile, param, (res) =>{
                    if (res.code == '200') {
                        this.member.memberCard.optionClientCardList = res.data;
                    }
                });
                //显示选择后的弹窗
                this.member.memberCard.isShow = true;
            },
            //选择会员卡操作
            catcherCardId(item){
                // this.member.memberCard.cardInfo = item;
                this.member.cardInfo.cardId = item.id;
                this.member.cardInfo.cardNo = item.cardNo;
                this.member.cardInfo.storageOrderPrice = item.orderPrice ? item.orderPrice : 0;
                //隐藏
                this.member.memberCard.isShow = false;
                this.member.isShow = false; //显示弹出框
            },
            //验证用户密码
            verifyPassword(){
                let param = {
                    usePasswd: this.member.cardInfo.userPass,
                    CustomerCode: $.cookie('code'),
                    cardId: this.member.cardInfo.cardId,
                };
                if (!(parseFloat(this.member.cardInfo.inputMoney) > 0)) {
                    return false;
                }
                jqueryPostParams(COURSE_URL.verifyCard, param, (response) => {
                    if (response.code === '200') {
                        this.member.cardInfo.userPassStatus = true;

                        if (this.member.cardInfo.userPassStatus == true && parseFloat(this.member.cardInfo.inputMoney) > 0) {
                            this.member.payMoney.discountMoney = parseFloat(this.member.cardInfo.inputMoney) + this.member.cardInfo.selectTotalPrice;
                        } else {
                            this.member.payMoney.discountMoney = this.member.cardInfo.selectTotalPrice;
                        }
                        alert('验证成功');
                        return false;
                    }
                    alert('验证失败')
                })
            },
            //结账按钮
            save(){
                //严重判断

                let param = {};
                let full = '', less = '', consumeState = '0';//满减
                if (this.member.rebate.type + "" === '1') {
                    full = this.member.rebate.repeat.full;
                    less = this.member.rebate.repeat.less;
                }
                if (this.member.rebate.type + "" === '0') {
                    full = this.member.rebate.single.full;
                    less = this.member.rebate.single.less;
                }
                if (this.index === 0) {
                    consumeState = '1';
                }
                //--
                let salesType = headVue.performance.salesType;//业绩分配类型
                let num = 0,//分配数额
                    allotType = '';
                if(salesType === "rate"){
                    num = headVue.performance.salesValueSales;
                    allotType = 1;
                }
                if(salesType === "num"){
                    num = headVue.performance.salesType;
                    allotType = 2;
                }

                let projectOrder = { //项目订单表
                    CustomerCode: $.cookie('code'),
                    OrderNumber: this.formData.orderInfo.orderNo,
                    ObjectId: this.formData.orderInfo.data.projectId, //对象ID
                    OrderType: 0, //0新购
                    Price: this.formData.orderInfo.data.price, //售价
                    BuyCount: this.formData.orderInfo.data.buyNum, //购买数量
                    SendCount: this.formData.orderInfo.data.giftNum?this.formData.orderInfo.data.giftNum:0, //赠送数量
                    AllCount: parseInt(this.formData.orderInfo.data.buyNum) + parseInt(this.formData.orderInfo.data.giftNum), //总数量
                    PayStatus: this.member.payType.payStatus,// 付款状态0-未付款 1-已付款 2-退款中 3-已退款
                    SalesId: headVue.performance.saleId, //销售员ID
                    SalesName: headVue.performance.saleName, //销售员名字
                    PayType: parseInt(this.formData.payType.index), //付款方式（1、全款；2、定金；3、赠送；4、置换；5、分期付款）
                    ConsumeType: parseInt(this.formData.payType.index) === 0 ? 1 : 2, //消费方式（1、会员消费；2、普通消费；3、员工领用；4、协议单位；）
                    TotalPrice: parseFloat(this.member.payMoney.totalPrice?this.member.payMoney.totalPrice:0), //总价
                    AlipayPrice: parseFloat(this.member.payType.p1?this.member.payType.p1:0), //
                    PayCardPrice: parseFloat(this.member.payType.p2?this.member.payType.p2:0), //
                    WechatPrice: parseFloat(this.member.payType.p3?this.member.payType.p3:0), //
                    CashPrice: parseFloat(this.member.payType.p4?this.member.payType.p4:0), //
                    AccountsPrice: parseFloat(this.member.payType.p5?this.member.payType.p5:0), //
                    FlowerPrice: parseFloat(this.member.payType.p6?this.member.payType.p6:0), //
                    OtherPrice: parseFloat(this.member.payType.p7?this.member.payType.p7:0), //
                    Discount: parseFloat(this.member.rebate.offer?this.member.rebate.offer:0), //优惠折扣
                    ChangeNum: parseFloat(this.member.rebate.integer?this.member.rebate.integer:0), //整单去零
                    FullType: this.member.rebate.type, //满减优惠类型（0、一次；1、可重复）
                    DiscountFull: full, //满
                    DiscountReduce: less, //减
                    DiscountPrice: parseFloat(this.member.payMoney.discount?this.member.payMoney.discount:0),//折扣/优惠
                    DiscountNum: parseFloat(this.member.payMoney.discountMoney?this.member.payMoney.discountMoney:0),//抵扣金额
                    NeedPrice: parseFloat(this.member.payMoney.price?this.member.payMoney.price:0),//应付金额
                    NoPrice: parseFloat(this.member.payMoney.noPrice?this.member.payMoney.noPrice:0),//未付金额
                    RetChange: parseFloat(this.member.payMoney.retChange?this.member.payMoney.retChange:0),//找零
                    ShopId: headVue.shopId,//基础表门店ID
                    PersonnelId: $.cookie('cid'),//人员（员工）ID
                    Flag: '',//备用
                    Status: 0,//财务审核 （0，待审核1，已审核，2，审核不通过）
                    AuditStatus: 0,//相关复核 （0，待审核1，已审核，2，审核不通过）
                    StatusUserId: this.formData.replacement.chooseUserId,//审核人员ID
                    AuditUserId: this.formData.replacement.chooseUserId,//复审核人员ID
                    DeposiTime: this.formData.payType.front.selectTime,//复审核人员ID
                    InvoiceStatus: this.InvoiceStatus == true ? 1 : 0, //是否购置税发票设置
                    AllotType: allotType, //业绩分配类型（以实际销售价格的多少为销售业绩）（0、无业绩分配；1、分配百分百；2、分配金额）
                    AllotNum: num, //分配数额（百分百或者实际金额，根据分配类型判断）

                };



                let sysConsumeOrder = {//消费结账单表
                    CustomerCode: $.cookie('code'),
                    CustomerId: this.formData.userInfo.data.id, //客户id
                    CreateTime: new Date(), //创建时间
                    CreateId: $.cookie('id'), //操作员ID
                    CreateName: $.cookie('name'), //操作员ID
                    OrderNumber: this.formData.orderInfo.orderNo, //单号
                    ShopId: headVue.shopId, //门店
                    SdadiumId: headVue.sdaduimId, //场馆
                    Discount: this.member.rebate.offer ? this.member.rebate.offer : 0,// 折扣
                    ReduceMoney: this.member.rebate.integer ? this.member.rebate.integer : 0,// 减去金额
                    AllReduceMoney: full,// 满额金额
                    RealMoney: less,// 满额减去金额
                    ShouldMoney: this.member.payMoney.price,// 实收金额
                    OriginalPrice: this.formData.orderInfo.data.totalPrice,// 原价
                    CostMoney: this.member.payMoney.totalPrice,// 应付金额
                    CouponMoney: this.member.payMoney.discount,// 优惠金额
                    RemainMoney: this.member.payMoney.retChange,// 找零
                    ConsumeState: consumeState,// 消费状态 0普通消费 1 会员消费 2员工消费 3 挂账 4挂单
                    MemberCardId: this.member.cardInfo.cardId,// 会员卡ID
//                    AgreeId: this.member.cardInfo.cardId,// 协议单位ID
//                    AgreeMoney: this.member.cardInfo.AgreeMoney,// 协议单位ID
                    PayState: this.member.payType.payStatus,// 付款状态0-未付款 1-已付款 2-退款中 3-已退款
                    IfOffset: 0,// 是否冲销 0 否 1 是
                    SalesId: headVue.performance.saleId, //销售员ID
                    SalesName: headVue.performance.saleName, //销售员名字

                };
                let saleType = headVue.sdaduimTypeResult.type == 'teach' ? headVue.sdaduimTypeResult.salesTypeId : '';
                let isTimeOut = (new Date(this.formData.orderInfo.data.beginDate) - new Date()) > 0 ? 4 : 0; //计算过期状态
                let addProject = { //会员增购项目表
                    CustomerCode: $.cookie('code'),
                    ContractNumber: headVue.agreementData, //合同编号
                    UseDay: headVue.currentDate, //日期
                    SaleType: saleType?saleType:1, //销售类型 0 POS销售 1 新会员购买 2 续课 3 场地开课
                    ShopId: headVue.shopId, //门店
                    SdadiumId: headVue.sdaduimId, //场馆
                    CardId: this.formData.orderInfo.data.cardId,//卡号id
                    ProjectId: this.formData.orderInfo.data.projectId, //项目ID
                    CourseSeriousId: this.formData.orderInfo.data.courseSeriesId, //课程系列ID
                    CourseId: this.formData.orderInfo.data.courseId, //课程ID
                    Useful: this.formData.orderInfo.data.validityPeriod, //有效期
                    StartTime: new Date(this.formData.orderInfo.data.beginDate), //开始时间
                    EndTime: new Date(this.formData.orderInfo.data.endDate), //结束时间
                    SaleId: headVue.performance.saleId, //销售员ID
                    SaleName: headVue.performance.saleName, //销售员名字
                    ConsumeType: consumeState, //消费类型  0 普通消费 1 会员消费 2 员工消费  3 挂账 4 挂单
                    State: isTimeOut, //状态 0 正常 1欠款 2 过期 3 历史 4 未开始
                };

                //--------------------
                let cardOrderPayModeList = []; //订单表
                for (let key in this.member.payType) {
                    let cardOrderPayMode = {},
                        model = '',
                        price = 0,
                        type = '0';

                    if (key === 'p1' && parseFloat(this.member.payType[key]) > 0) {
                        model = 1;
                        price = parseFloat(this.member.payType[key]).toFixed(2)
                    }
                    if (key === 'p2' && parseFloat(this.member.payType[key]) > 0) {
                        model = 2
                        price = parseFloat(this.member.payType[key]).toFixed(2)
                    }
                    if (key === 'p3' && parseFloat(this.member.payType[key]) > 0) {
                        model = 3;
                        price = parseFloat(this.member.payType[key]).toFixed(2)
                    }
                    if (key === 'p4' && parseFloat(this.member.payType[key]) > 0) {
                        model = 4;
                        price = parseFloat(this.member.payType[key]).toFixed(2)
                    }
                    if (key === 'p5' && parseFloat(this.member.payType[key]) > 0) {
                        model = 5;
                        price = parseFloat(this.member.payType[key]).toFixed(2)
                    }
                    if (key === 'p6' && parseFloat(this.member.payType[key]) > 0) {
                        model = 6;
                        price = parseFloat(this.member.payType[key]).toFixed(2)
                    }
                    if (parseFloat(price) > 0) {
                        cardOrderPayMode = {
                            orderId: '', //订单ID
                            orderType: 1, //订单类型（1、新购；2、续卡；3、转卡；4、补卡（暂无）；5、储值；6、补余；7、退卡, 8、停卡 ，9、转让）
                            payMode: model, // 支付方式（1、支付宝；2、刷卡；3、微信；4、现金；5、转账；6、花呗；7、其他）
                            payPrice: parseFloat(price), //支付金额
                            type: type, //支付状态（0：支出 1：收入）（备用）
                        }
                        cardOrderPayModeList.push(cardOrderPayMode);
                    }
                }
//                let cardOrderPayModeData = {//订单表
//                    list: cardOrderPayModeList, //数组保存
//                };


                //-------------------------------
                //编号表
                let fr_card_agreement = {
                    agreementId: headVue.agreementId, //协议规则ID
                    cardId: this.formData.orderInfo.data.cardId,//会员卡ID
                    agreementNo: headVue.agreementData,//协议号
                    isUsing: '1',//是否启用(0：不启用 1：启用）默认1
                    CustomerCode: $.cookie('code'),
                    projectId: this.formData.orderInfo.data.projectId,//项目/课程 ID
                };

                //-------------------------------
                //会员卡订单交易明细
                let fr_card_order_datail_list = [];
                //储值、权益信息
                let fr_card_order_datail_member_chuzhi = {};
                let fr_card_order_datail_member_quanyi = {};
                let fr_card_order_datail_member_chuzhi_less = {};
                let fr_card_order_datail_genel_quanyi = {};
                if (this.member.cardInfo.userPassStatus == true && parseFloat(this.member.cardInfo.inputMoney) > 0) {
                    fr_card_order_datail_member_chuzhi = {
                        cardId: this.formData.orderInfo.data.cardId, //会员卡ID
                        clientId: $.cookie('cid'), //客户ID
                        cardType: '1', //卡种类型（1：时间卡 2：小时卡 3：次卡 4：储值卡 5：充值卡 6：折扣卡）
                        orderStatus: '1', //支付状态（0：支出 1：收入）
                        orderPrice: parseFloat(this.member.cardInfo.inputMoney),//金额（注意正负 支出就是  -0.00）
                        orderRights_num: 0, //权益 注意正负
                        shopId: headVue.shopId, //基础表门店ID
                        personnelId: $.cookie('cid'), //操作员工id
                        flag: '储值', //消费内容
                        type: 2, //支付类型（1:权益 2:储值 3:其他消费）
                        CustomerCode: $.cookie('code'),
                        status: 0,//财务审核 （0，待审核1，已审核，2，审核不通过）
                        auditStatus: 0,//相关复核 （0，待审核1，已审核，2，审核不通过）
                        orderType: 1,//订单类型（1、新购；2、续卡；3、转卡；4、补卡（暂无）；5、储值；6、补余；7、退卡, 8、停卡，9，转让，10，卡升级【若有其他的，类型数字请往后添加】）
                        orderAmt: 0, //剩余权益\剩余储值金额
                    };
                    fr_card_order_datail_member_chuzhi_less = {
                        cardId: this.formData.orderInfo.data.cardId, //会员卡ID
                        clientId: $.cookie('cid'), //客户ID
                        cardType: '1', //卡种类型（1：时间卡 2：小时卡 3：次卡 4：储值卡 5：充值卡 6：折扣卡）
                        orderStatus: '0', //支付状态（0：支出 1：收入）
                        orderPrice: -parseFloat(this.member.cardInfo.inputMoney),//金额（注意正负 支出就是  -0.00）
                        orderRightsNum: 0, //权益 注意正负
                        shopId: headVue.shopId, //基础表门店ID
                        personnelId: $.cookie('cid'), //操作员工id
                        flag: '储值', //消费内容
                        type: 2, //支付类型（1:权益 2:储值 3:其他消费）
                        CustomerCode: $.cookie('code'),
                        status: 0,//财务审核 （0，待审核1，已审核，2，审核不通过）
                        auditStatus: 0,//相关复核 （0，待审核1，已审核，2，审核不通过）
                        orderType: 1,//订单类型（1、新购；2、续卡；3、转卡；4、补卡（暂无）；5、储值；6、补余；7、退卡, 8、停卡，9，转让，10，卡升级【若有其他的，类型数字请往后添加】）
                        orderAmt: parseFloat(this.member.cardInfo.storageOrderPrice) - parseFloat(this.member.cardInfo.inputMoney), //剩余权益\剩余储值金额
                    }
                    fr_card_order_datail_list.push(fr_card_order_datail_member_chuzhi)
                    fr_card_order_datail_list.push(fr_card_order_datail_member_chuzhi_less)
                }

                if(parseFloat(this.member.cardInfo.totalPrice) > 0){
                    fr_card_order_datail_member_quanyi = {
                        cardId: this.formData.orderInfo.data.cardId, //会员卡ID
                        clientId: $.cookie('cid'), //客户ID
                        cardType: '1', //卡种类型（1：时间卡 2：小时卡 3：次卡 4：储值卡 5：充值卡 6：折扣卡）
                        orderStatus: '1', //支付状态（0：支出 1：收入）
                        orderPrice: 0,//金额（注意正负 支出就是  -0.00）
                        orderRightsNum: parseFloat(this.member.cardInfo.totalPrice), //权益 注意正负
                        shopId: headVue.shopId, //基础表门店ID
                        personnelId: $.cookie('cid'), //操作员工id
                        flag: '权益', //消费内容
                        type: 1, //支付类型（1:权益 2:储值 3:其他消费）
                        CustomerCode: $.cookie('code'),
                        status: 0,//财务审核 （0，待审核1，已审核，2，审核不通过）
                        auditStatus: 0,//相关复核 （0，待审核1，已审核，2，审核不通过）
                        orderType: 1,//订单类型（1、新购；2、续卡；3、转卡；4、补卡（暂无）；5、储值；6、补余；7、退卡, 8、停卡，9，转让，10，卡升级【若有其他的，类型数字请往后添加】）
                        orderAmt: 0, //剩余权益\剩余储值金额
                    };
                    fr_card_order_datail_list.push(fr_card_order_datail_member_quanyi)
                }

                if (parseFloat(this.member.generalCardInfo.inputMoney) > 0) {
                    fr_card_order_datail_genel_quanyi = {
                        cardId: this.formData.orderInfo.data.cardId, //会员卡ID
                        clientId: $.cookie('cid'), //客户ID
                        cardType: '1', //卡种类型（1：时间卡 2：小时卡 3：次卡 4：储值卡 5：充值卡 6：折扣卡）
                        orderStatus: '1', //支付状态（0：支出 1：收入）
                        orderPrice: 0,//金额（注意正负 支出就是  -0.00）
                        orderRightsNum: parseFloat(this.member.generalCardInfo.inputMoney), //权益 注意正负
                        shopId: headVue.shopId, //基础表门店ID
                        personnelId: $.cookie('cid'), //操作员工id
                        flag: '权益', //消费内容
                        type: 1, //支付类型（1:权益 2:储值 3:其他消费）
                        CustomerCode: $.cookie('code'),
                        status: 0,//财务审核 （0，待审核1，已审核，2，审核不通过）
                        auditStatus: 0,//相关复核 （0，待审核1，已审核，2，审核不通过）
                        orderType: 1,//订单类型（1、新购；2、续卡；3、转卡；4、补卡（暂无）；5、储值；6、补余；7、退卡, 8、停卡，9，转让，10，卡升级【若有其他的，类型数字请往后添加】）
                        orderAmt: 0, //剩余权益\剩余储值金额
                    };
                    fr_card_order_datail_list.push(fr_card_order_datail_genel_quanyi)
                }





                //--------------------------------
                let fr_card_order_price_datail_list = [];
                //资金交易明细
                let fr_card_order_price_datail_member_chuzhi = {};
                let fr_card_order_price_datail_member_quanyi = {};
                let fr_card_order_price_datail_member_chuzhi_less = {};
                let fr_card_order_price_datail_genel_quanyi = {};
                if (this.member.cardInfo.userPassStatus == true && parseFloat(this.member.cardInfo.inputMoney) > 0) {
                    fr_card_order_price_datail_member_chuzhi = {
                        cardId: this.formData.orderInfo.data.cardId, //会员卡ID
                        clientId: $.cookie('cid'), //客户ID
                        cardType: '1', //卡种类型（1：时间卡 2：小时卡 3：次卡 4：储值卡 5：充值卡 6：折扣卡）
                        orderStatus: '1', //支付状态（0：支出 1：收入）
                        orderPrice: parseFloat(this.member.cardInfo.inputMoney),//金额（注意正负 支出就是  -0.00）
                        orderRightsNum: 0, //权益 注意正负
                        shopId: headVue.shopId, //基础表门店ID
                        personnelId: $.cookie('cid'), //操作员工id
                        flag: '储值', //消费内容
                        type: 2, //支付类型（1:权益 2:储值 3:其他消费）
                        CustomerCode: $.cookie('code'),
                        status: 0,//财务审核 （0，待审核1，已审核，2，审核不通过）
                        auditStatus: 0,//相关复核 （0，待审核1，已审核，2，审核不通过）
                        orderType: 1,//订单类型（1、新购；2、续卡；3、转卡；4、补卡（暂无）；5、储值；6、补余；7、退卡, 8、停卡，9，转让，10，卡升级【若有其他的，类型数字请往后添加】）
                        orderId: '', //订单ID
                    };
                    fr_card_order_price_datail_member_chuzhi_less = {
                        cardId: this.formData.orderInfo.data.cardId, //会员卡ID
                        clientId: $.cookie('cid'), //客户ID
                        cardType: '1', //卡种类型（1：时间卡 2：小时卡 3：次卡 4：储值卡 5：充值卡 6：折扣卡）
                        orderStatus: '0', //支付状态（0：支出 1：收入）
                        orderPrice: -parseFloat(this.member.cardInfo.inputMoney),//金额（注意正负 支出就是  -0.00）
                        orderRightsNum: 0, //权益 注意正负
                        shopId: headVue.shopId, //基础表门店ID
                        personnelId: $.cookie('cid'), //操作员工id
                        flag: '储值', //消费内容
                        type: 2, //支付类型（1:权益 2:储值 3:其他消费）
                        CustomerCode: $.cookie('code'),
                        status: 0,//财务审核 （0，待审核1，已审核，2，审核不通过）
                        auditStatus: 0,//相关复核 （0，待审核1，已审核，2，审核不通过）
                        orderType: 1,//订单类型（1、新购；2、续卡；3、转卡；4、补卡（暂无）；5、储值；6、补余；7、退卡, 8、停卡，9，转让，10，卡升级【若有其他的，类型数字请往后添加】）
                        orderId: '', //订单ID
                    }
                    fr_card_order_price_datail_list.push(fr_card_order_price_datail_member_chuzhi)
                    fr_card_order_price_datail_list.push(fr_card_order_price_datail_member_chuzhi_less)
                }

                if(parseFloat(this.member.cardInfo.totalPrice) > 0){
                    fr_card_order_price_datail_member_quanyi = {
                        cardId: this.formData.orderInfo.data.cardId, //会员卡ID
                        clientId: $.cookie('cid'), //客户ID
                        cardType: '1', //卡种类型（1：时间卡 2：小时卡 3：次卡 4：储值卡 5：充值卡 6：折扣卡）
                        orderStatus: '1', //支付状态（0：支出 1：收入）
                        orderPrice: 0,//金额（注意正负 支出就是  -0.00）
                        orderRightsNum: parseFloat(this.member.cardInfo.totalPrice), //权益 注意正负
                        shopId: headVue.shopId, //基础表门店ID
                        personnelId: $.cookie('cid'), //操作员工id
                        flag: '权益', //消费内容
                        type: 1, //支付类型（1:权益 2:储值 3:其他消费）
                        CustomerCode: $.cookie('code'),
                        status: 0,//财务审核 （0，待审核1，已审核，2，审核不通过）
                        auditStatus: 0,//相关复核 （0，待审核1，已审核，2，审核不通过）
                        orderType: 1,//订单类型（1、新购；2、续卡；3、转卡；4、补卡（暂无）；5、储值；6、补余；7、退卡, 8、停卡，9，转让，10，卡升级【若有其他的，类型数字请往后添加】）
                        orderId: '', //订单ID
                    };
                    fr_card_order_price_datail_list.push(fr_card_order_price_datail_member_quanyi)
                }

                if (parseFloat(this.member.generalCardInfo.inputMoney) > 0) {
                    fr_card_order_price_datail_genel_quanyi = {
                        cardId: this.formData.orderInfo.data.cardId, //会员卡ID
                        clientId: $.cookie('cid'), //客户ID
                        cardType: '1', //卡种类型（1：时间卡 2：小时卡 3：次卡 4：储值卡 5：充值卡 6：折扣卡）
                        orderStatus: '1', //支付状态（0：支出 1：收入）
                        orderPrice: 0,//金额（注意正负 支出就是  -0.00）
                        orderRightsNum: parseFloat(this.member.generalCardInfo.inputMoney), //权益 注意正负
                        shopId: headVue.shopId, //基础表门店ID
                        personnelId: $.cookie('cid'), //操作员工id
                        flag: '权益', //消费内容
                        type: 1, //支付类型（1:权益 2:储值 3:其他消费）
                        CustomerCode: $.cookie('code'),
                        status: 0,//财务审核 （0，待审核1，已审核，2，审核不通过）
                        auditStatus: 0,//相关复核 （0，待审核1，已审核，2，审核不通过）
                        orderType: 1,//订单类型（1、新购；2、续卡；3、转卡；4、补卡（暂无）；5、储值；6、补余；7、退卡, 8、停卡，9，转让，10，卡升级【若有其他的，类型数字请往后添加】）
                        orderId: '', //订单ID
                    };
                    fr_card_order_price_datail_list.push(fr_card_order_price_datail_genel_quanyi)
                }





                //--------------------------------

                //业绩分配
                let fr_card_order_allot_set_list = [];
                let allotList = headVue.performance.list;
                $.each(allotList, (i,d) =>{
                    let fr_card_order_allot_set = {

                        orderId: '', //订单ID
                        orderType: 1,//订单类型（1、新购；6、补余）
                        allotNum: num, //分配数额（百分百或者实际金额，根据分配类型判断）
                        saleAllotType: allotType, //销售业绩分配类型（0、无业绩分配；1、按比例分配；2、按金额分配）
                        personnelId: $.cookie('cid'), //操作员工id
                        saleAllotNum: d.num, //员工分配数额（百分百或者实际金额，根据分配类型判断）
                        flag: '业绩分配比例', //备用
                        CustomerCode: $.cookie('code'),
                        createUserId: $.cookie('cid'),//创建人ID
                        allotType: d.allotType, //业绩分配类型（以实际销售价格的多少为销售业绩）（1、分配百分百；2、分配金额）
                    };
                    fr_card_order_allot_set_list.push(fr_card_order_allot_set)
                });

                //-----------------------------
                //fr_client_personnel_relate
                let fr_client_personnel_relate = [];

                let fr_client_personnel_relate1 = {
                    clientId: $.cookie('cid'), //客户ID
                    shopId: headVue.shopId, //基础表门店ID
                    personalId: headVue.sdaduimTypeResult.coachId, //人员信息Id（教练ID）
                    flag: '教练', //人员信息Id（教练ID）
                    type: '0', //是否为认领人 0: 否 1:是 默认0
                    CustomerCode: $.cookie('code'),
                    roleId: headVue.sdaduimTypeResult.coachRoleId, //人员信息Id（教练ID）
                    time: new Date(), //认领时间
                    userType : 1, //0 客户角色   1 增购项目时添加的角色
                    otherTableId: '', //绑定表ID
                };

                let fr_client_personnel_relate2 = {
                    clientId: $.cookie('cid'), //客户ID
                    shopId: headVue.shopId, //基础表门店ID
                    personalId: headVue.sdaduimTypeResult.assistantId, //人员信息Id（教练ID）
                    flag: '助理教练', //人员信息Id（教练ID）
                    type: '0', //是否为认领人 0: 否 1:是 默认0
                    CustomerCode: $.cookie('code'),
                    roleId: headVue.sdaduimTypeResult.assistantRoleId, //人员信息Id（教练ID）
                    time: new Date(), //认领时间
                    userType : 1, //0 客户角色   1 增购项目时添加的角色
                    otherTableId: '', //绑定表ID
                };
                fr_client_personnel_relate.push(fr_client_personnel_relate1)
                fr_client_personnel_relate.push(fr_client_personnel_relate2)
//                fr_client_personnel_relate.coach = fr_client_personnel_relate1;
//                fr_client_personnel_relate.assistant = fr_client_personnel_relate2;



                //包装封装

//                param.projectOrder = JSON.stringify(projectOrder);
//                param.sysConsumeOrder = JSON.stringify(sysConsumeOrder);
//                param.addProject = JSON.stringify(addProject);
//                param.addProject = JSON.stringify(addProject);
//                param.cardOrderPayModeData = JSON.stringify(cardOrderPayModeData);
//                param.cardAgreement = JSON.stringify(fr_card_agreement);
//                param.cardOrderDatailList = JSON.stringify(fr_card_order_datail_list);
//                param.cardOrderPriceDatailList = JSON.stringify(fr_card_order_price_datail_list);
//                param.cardOrderAllotSetList = JSON.stringify(fr_card_order_allot_set_list);
//                param.clientPersonnelRelate = JSON.stringify(fr_client_personnel_relate);

                param.projectOrder = projectOrder;
                param.sysConsumeOrder = sysConsumeOrder;
                param.addProject = addProject;
                param.cardOrderPayModeData = cardOrderPayModeList;
                param.cardAgreement = fr_card_agreement;
                param.cardOrderDetailList = fr_card_order_datail_list;
                param.cardOrderPriceDetailList = fr_card_order_price_datail_list;
                param.cardOrderAllotSetList = fr_card_order_allot_set_list;
                param.clientPersonnelRelate = fr_client_personnel_relate;
                console.log(param)
                console.log(JSON.stringify(param))

                ajaxPostJsonParams(COURSE_URL.addSaveCustomer, JSON.stringify(param), (response) => {
                    console.log(response)
                })
            }
        }
    });

</script>

<style>
    #customer-new-buy-project-bill-body .section4_box_top input[type="radio"] {
        top: 0px;
        margin-left: 1px;
    }

    #customer-new-buy-project-bill-body .section4_box_botton input[type="radio"] {
        top: 0px;
        margin-left: 1px;
    }

    #customer-new-buy-project-bill-body .section4_box_botton fieldset {
        display: block;
    }

    #customer-new-buy-project-bill-body .section4_box_botton .verify-error {
        color: red;
        text-align: left !important;
    }

    #customer-new-buy-project-bill-body .section4_box_botton .verify-success {
        color: green;
        text-align: left !important;;
    }

    #customer-new-buy-project-bill-body .newCustomers_maskLayer {
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        left: 0;
        margin: 0 auto;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0);
        display: none;
    }

    #customer-new-buy-project-bill-body .newCustomers_maskLayer .newCustomers_maskLayer_box_top {
        line-height: 36px;
        background-color: rgba(0, 153, 255, 1);
        text-align: center;
    }

    #customer-new-buy-project-bill-body .newCustomers_maskLayer .newCustomers_maskLayer_box_top span {
        color: #fff;
    }

    #customer-new-buy-project-bill-body .newCustomers_maskLayer .newCustomers_maskLayer_box_top a {
        position: absolute;
        right: 0px;
        color: #000;
        font-size: 18px;
        font-weight: 900;
        padding: 0 10px;
    }

    .performance .newCustomers_maskLayer_box {
        top: 20%;
        max-width: 600px;
        position: relative;
        margin: 0 auto;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #fff;
        box-shadow: 0 0 10px 1px #000;
    }

    .KHGL-table-box {
        padding: 12px 8px;
    }

    .KHGL-table1 {
        width: 100%;
        border-top: 1px solid #e4e4e4;
        border-right: 1px solid #e4e4e4;
        border-left: 1px solid #e4e4e4;
    }

    .KHGL-table1 th {
        background: #f2f2f2;
        text-align: center;
        font-size: 12px;
        line-height: 28px;
        font-weight: 400;
        color: #000;
        border-bottom: 1px solid #e4e4e4;
    }

    .KHGL-table1 td {
        font-size: 12px;
        text-align: center;
        line-height: 28px;
        color: #000;
        border-bottom: 1px solid #e4e4e4;
    }

    .col-green {
        color: #090 !important;
    }

    .col-red {
        color: #f00 !important;
    }

    .col-orange {
        color: #f90 !important;
    }

    .col-blue {
        color: #00f !important;
    }

    .cursorP {
        cursor: pointer !important;
    }

    .KHGL-table1 .col-green {
        cursor: pointer;
    }

    .KHGL-title {
        height: 22px;
        margin: 0;
        line-height: 34px;
        padding-left: 10px;
        color: #f00;
        font-size: 12px;
    }

    .KHGL-table2 {
        width: 100%;
        border: 1px solid #e4e4e4;
    }

    .KHGL-table2 th {
        background: #00cccc;
        text-align: center;
        font-size: 12px;
        line-height: 30px;
        font-weight: 400;
        color: #000;
    }

    .KHGL-table2 td {
        font-size: 12px;
        text-align: center;
        line-height: 30px;
        color: #000;
    }

    .KHGL-table2 tr:nth-child(2n+2),
    .KHGL-table2 tr:nth-child(2n+2) {
        background: #e8ffff;
    }

    .KHGL-table2 tr:hover {
        background: #b8dfdf;
    }

</style>
