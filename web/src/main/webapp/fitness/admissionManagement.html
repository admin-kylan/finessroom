<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>健身管理</title>
	<link rel="stylesheet" href="../css/bootstrap.min.css" />
	<link rel="stylesheet" href="../css/reset.css" />
	<link rel="stylesheet" href="../css/base.css" />
	<link rel="stylesheet" href="../gym/css/common.css" />
	<link rel="stylesheet" href="../css/skin/jedate.css" />
	<link rel="stylesheet" href="../css/admissionManagement.css" />
	<link rel="stylesheet" href="../css/combobox.css" />
	<link rel="stylesheet" href="../css/simple-calendar.css">

</head>

<body>

	<div class="wrap" id="admissionManagement">
		<!--<div class="top"><img src="../img/u6.png">健身管理</div>-->
		<div class="cWrap clearfix">
			<!--<div class="left">-->
				<!--<ul>-->
					<!--<li><img src="../img/u40.png"><a href="javascript:;">客户接待</a></li>-->
					<!--<li><img src="../img/u40.png"><a href="javascript:;">潜在客户录入</a></li>-->
					<!--<li><img src="../img/u40.png"><a href="javascript:;">潜在客户维护</a></li>-->
					<!--<li><img src="../img/u40.png"><a href="javascript:;">GFP录入</a></li>-->
					<!--<li><img src="../img/u40.png"><a href="javascript:;">体适能测试</a></li>-->
					<!--<li><img src="../img/u40.png"><a href="javascript:;">入会合同</a></li>-->
					<!--<li><img src="../img/u40.png"><a href="javascript:;">建立新会员</a></li>-->
					<!--<li><img src="../img/u40.png"><a href="javascript:;">会员管理/维护</a></li>-->
					<!--<li><img src="../img/u40.png"><a href="javascript:;">卡权益维护</a></li>-->
					<!--<li><img src="../img/u40.png"><a  class="on" href="../fitness/admissionManagement.html">出入场管理</a></li>-->
					<!--<li><img src="../img/u40.png"><a href="javascript:;">商品售卖管理</a></li>-->
					<!--<li><img src="../img/u40.png"><a href="javascript:;">租赁管理</a></li>-->
					<!--<li><img src="../img/u40.png"><a href="javascript:;">POS</a></li>-->
					<!--<li> <img src="../img/u40.png"><a href="../fitness/appointment.html">团操约课管理</a></li>-->
					<!--<li><img src="../img/u40.png"><a href="../fitness/training.html">私教约课/耗课管理</a></li>-->
				<!--</ul>-->
			<!--</div>-->
			<div class="content" style="width: 99%;">
				<div class="container-fluid p15">
					<!--真正开始写你的页面-->
					<div class="bgc-fff clearfix p15">
						<div class="page-header">
							<h2 class="text-center">健身出入场 （{{shopName}}）</h2>
						</div>
						<div class="row entrance-manage">
							<div class="col-xs-12 col-sm-6">
								<div class="dropdown">
									<h4>健身 入场消费平台</h4>
									<!--<button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown"-->
									 <!--aria-haspopup="true" aria-expanded="true">-->
										<!--卡号/手机号/票券-->
									<!--</button>-->
									<input placeholder="卡号/手机号/票券" class="btn btn-default dropdown-toggle" @keyup.enter="inputMethod" v-model="inputSearch">
									<!--<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">-->
										<!--<li><a href="#" @click="LI(0)">1</a></li>-->
										<!--<li><a href="#" @click="LI(1)">2</a></li>-->
										<!--<li><a href="#" @click="LI(2)">3</a></li>-->
									<!--</ul>-->
								</div>
								<fieldset class="fieldset-info">
									<legend>会员信息</legend>
									<div class="member-no-data">无会员信息</div>
									<div class="fieldset-content">
										<div class="flex-box flex-start">
											<div class="flex-box-item" v-if="LiIndex==0">
												<div class="info-row">
													<div class="info-item">
														<span class="w70">类型：</span>
														<span class="c-ff0000">{{clientInfoObject.type}}</span>
													</div>
													<div class="info-item">
														<span class="w70">会员卡状态</span>
														<strong>{{clientInfoObject.status}}</strong>
													</div>
												</div>
												<div class="info-row">
													<div class="info-item">
														<span class="w70">会员姓名</span>
														<strong>{{clientInfoObject.name}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">会员性别</span>
														<strong>{{clientInfoObject.sex}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">生日</span>
														<strong>{{clientInfoObject.birthday| toDateyyyyMMddInfo}}</strong>
													</div>
												</div>
												<div class="info-row">
													<div class="info-item">
														<span class="w70">会员卡号</span>
														<strong>{{clientInfoObject.cardNo}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">会员卡系列</span>
														<strong>{{clientInfoObject.carSeries}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">会员卡名称</span>
														<strong>{{clientInfoObject.cardName}}</strong>
													</div>
												</div>
												<div class="info-row">
													<div class="info-item">
														<span class="w70">总权益</span>
														<strong>{{clientInfoObject.totalInterests}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">赠送权益</span>
														<strong>{{clientInfoObject.giftInterests}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">剩余权益</span>
														<strong>{{clientInfoObject.endInterests}}</strong>
													</div>
												</div>
												<div class="info-row clearfix">
													<div class="info-item">
														<span class="w70">开卡时间</span>
														<strong>{{clientInfoObject.cardBeginDate| toDateyyyyMMddInfo}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">失效时间</span>
														<strong>{{clientInfoObject.cardEndDate| toDateyyyyMMddInfo}}</strong>
													</div>
												</div>
												<div class="info-row">
													<div class="info-item">
														<span class="w70">上一次消费时间</span>
														<strong>{{clientInfoObject.prevConsumDate| toDateyyyyMMddInfo}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">间隔</span>
														<strong>{{clientInfoObject.intervalDate}}天</strong>
													</div>
												</div>
												<div class="info-row">
													<div class="info-item">
														<span class="w70">销售顾问</span>
														<strong>{{clientInfoObject.salePeople}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">指定教练</span>
														<strong>{{clientInfoObject.coachPeople}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">服务顾问</span>
														<strong>{{clientInfoObject.serverPeople}}</strong>
													</div>
												</div>
												<div class="info-row">
													<div class="info-item">
														<span class="w70">租赁内容</span>
														<strong>{{clientInfoObject.content}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">租赁失效</span>
														<strong>{{clientInfoObject.Invalid}}</strong>
													</div>
												</div>
											</div>
											<div class="flex-box-item" v-if="LiIndex==1">
												<div class="info-row">
													<div class="info-item">
														<span class="w70">类型：</span>
														<span class="c-ff0000">{{clientInfoObject.type}}</span>
													</div>
													<div class="info-item">
														<span class="w70">票券状态</span>
														<strong>{{clientInfoObject.status}}</strong>
													</div>
												</div>
												<div class="info-row">
													<div class="info-item">
														<span class="w70">会员姓名</span>
														<strong>{{clientInfoObject.name}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">会员性别</span>
														<strong>{{clientInfoObject.sex}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">生日</span>
														<strong>{{clientInfoObject.birthday| toDateyyyyMMddInfo}}</strong>
													</div>
												</div>
												<div class="info-row">
													<div class="info-item">
														<span class="w70">票券编号</span>
														<strong>{{clientInfoObject.cardNo}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">票券系列</span>
														<strong>{{clientInfoObject.carSeries}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">票券名称</span>
														<strong>{{clientInfoObject.cardName}}</strong>
													</div>
												</div>
												<div class="info-row">
													<div class="info-item">
														<span class="w70">总权益</span>
														<strong>{{clientInfoObject.totalInterests}}</strong>
													</div>

													<div class="info-item">
														<span class="w70">剩余权益</span>
														<strong>{{clientInfoObject.endInterests}}</strong>
													</div>
												</div>
												<div class="info-row clearfix">
													<div class="info-item">
														<span class="w70">开始时间</span>
														<strong>{{clientInfoObject.cardBeginDate| toDateyyyyMMddInfo}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">失效时间</span>
														<strong>{{clientInfoObject.cardEndDate| toDateyyyyMMddInfo}}</strong>
													</div>
												</div>
												<div class="info-row">
													<div class="info-item">
														<span class="w70">上一次消费</span>
														<strong>{{clientInfoObject.prevConsumDate| toDateyyyyMMddInfo}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">间隔</span>
														<strong>{{clientInfoObject.intervalDate}}天</strong>
													</div>
												</div>
												<div class="info-row">
													<div class="info-item">
														<span class="w70">销售顾问</span>
														<strong>{{clientInfoObject.salePeople}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">指定教练</span>
														<strong>{{clientInfoObject.coachPeople}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">服务顾问</span>
														<strong>{{clientInfoObject.serverPeople}}</strong>
													</div>
												</div>
												<div class="info-row">
													<div class="info-item">
														<span class="w70">租赁内容</span>
														<strong>{{clientInfoObject.content}}</strong>
													</div>
													<div class="info-item">
														<span class="w70">租赁失效</span>
														<strong>{{clientInfoObject.Invalid}}</strong>
													</div>
												</div>
											</div>

											<div class="avatar">
												<img src="../img/xiaopo.png" width="100%" />
											</div>
										</div>
									</div>
								</fieldset>
								<div class="flex-box flex-start mb15">
									<span class="w70">备注</span>
									<textarea class="flex-box-item form-control"></textarea>
								</div>
								<div class="flex-box flex-start mb15">
									<span class="w70">异常信息</span>
									<textarea class="flex-box-item form-control"></textarea>
								</div>
							</div>
							<div class="col-xs-12 col-sm-6" >
								<div class="dropdown">
									<h4>自动出场验证平台</h4>
									<!--<button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown"-->
									 <!--aria-haspopup="true" aria-expanded="true">-->
										<!--卡号/手机号/票券-->
									<!--</button>-->
                                    <input placeholder="卡号/手机号/票券" class="btn btn-default dropdown-toggle" @keyup.enter="outputMethod" v-model="outputSearch">
								</div>
								<div class="mtb15">
									<table class="table table-bordered table-hover">
										<thead>
											<tr>
												<th>姓名</th>
												<th>挂账金额</th>
												<th>消费时间</th>
												<th>操作人</th>
											</tr>
										</thead>
										<tbody>

											<tr v-for="(item, index) in accessInfoOutputList">
												<td>{{item.clientName}}</td>
												<td>{{item.lessPrice| lessPriceOption}}</td>
												<td>{{item.createDate| toDateyyyyMMddHHmm}}</td>
												<td>{{item.outputUserName}}</td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>

						<div class="flex-box" style="margin-bottom: 15px">
							<div class="flex-box-item">
								<span class="w70">总人数</span><strong>{{countObject.allCount}}</strong>
								<span class="w70">在场人数</span><strong>{{countObject.nowCount}}</strong>
								<span class="w70">离场人数</span><strong>{{countObject.outputCount}}</strong>
								<span class="w70">男</span><strong>{{countObject.manCount}}</strong>
								<span class="w70">女</span><strong>{{countObject.womenCount}}</strong>
								<span class="w70">入场总人次</span><strong>{{countObject.allCount}}</strong>
								<span class="w70">离场总人次</span><strong>{{countObject.outputAllCount}}</strong>
							</div>
							<div class="search-box">
								<div class="input-group">
									<input type="text" class="form-control" placeholder="姓名/卡号/手牌号" v-model="searchInput">
									<span class="input-group-addon btn btn-primary c-fff" @click="loadInfoList">搜索</span>
								</div>
							</div>
						</div>
						<div class="table-box table-responsive" >
							<table class="table table-striped table-bordered">
								<thead>
									<tr>
										<th>消费时间</th>
										<th>会员姓名</th>
										<th>销售人员</th>
										<th>入场方式</th>
										<th>消费项目</th>
										<th>使用人</th>
										<th>消费次数</th>
										<th>是否出场</th>
										<th>操作人</th>
										<th>出场时间</th>
										<th>手牌号</th>
										<th>更换手牌</th>
										<th>冲销</th>
										<!--<th>打印</th>-->
									</tr>
								</thead>
								<tbody>
									<tr v-for="(item, index) in accessInfoList">
										<td>{{item.createDate|toDateyyyyMMddHHmm}}</td>
										<td>{{item.clientName}}</td>
										<td>{{item.saleUseName}}</td>
										<td>{{item.type}}</td>
										<td>{{item.saleProject}}</td>
										<td>{{item.usePeopleName}}</td>
										<td>{{item.isDone| saleNum}}</td>
										<td>{{item.status| outputOption}}</td>
										<td>{{item.createUserName}}</td>
										<td>{{item.outputDate|toDateyyyyMMddHHmm}}</td>
										<td>{{item.handNum}}</td>
										<td class="c-0099ff" @click="changeNum(item)" style="cursor: pointer;">更换手牌</td>
										<template v-if="item.isDone == 0 && item.isUse == 1">
											<td class="c-ff9900" @click="cancelAccessInfo(item)" style="cursor: pointer;">冲销</td>
										</template>
										<template v-if="item.isDone == 0 && item.isUse == 0">
											<td class="c-ff9900" style="color: #737372!important;">冲销</td>
										</template>
										<template v-if="item.isDone == 1 && item.isUse == 0">
											<td class="c-ff9900" style="color: red!important;">冲销记录</td>
										</template>
										<!--<td>打印</td>-->
									</tr>
								</tbody>
							</table>
						</div>
					</div>

					<!--选择对应项目弹窗-->
					<div class="modal fade modal-style xm-modal" tabindex="-1" id="modal1" role="dialog" data-backdrop="false" style="overflow: auto;height: 100%;">
					  <div class="modal-dialog" role="document">
					    <div class="modal-content">
					      <div class="modal-header">
					      	<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
					        <h4 class="modal-title">选择对应项目</h4>
					      </div>
					      <div class="modal-body">
					      	<div class="flex-box flex-start">
					      		<div class="flex-box-item" style="padding-right: 10px;">
					      			<table class="table table-striped table-style dyxm-table">
										<thead>
											<tr>
												<td width="50px">序号</td>
												<td width="100px">会员姓名</td>
												<td width="150px">会员卡号</td>
												<td>会员卡名称</td>
											</tr>
										</thead>
									</table>
					      			<div class="one-member" v-for="(item, index) in cardItemInfoList">
						      			<table class="table table-striped table-style dyxm-table">
											<tbody>
												<tr>
													<td width="50px">{{index+1}}</td>
													<td width="100px">{{item.clientName}}</td>
													<td width="150px">{{item.cardNo}}</td>
													<td>{{item.cardTypeName}}</td>
												</tr>
											</tbody>
										</table>
										<div class="flex-box flex-start">
											<div class="w50">项目</div>
											<div class="flex-box-item">
												<div class="selectXM-item" v-for="obj in item.items">
													<span class="selectXM" @click="selectItemFunc(obj, item)">选择</span>
													<span class="selectXM-name">项目：{{obj.itemName}}</span>
												</div>
											</div>
										</div>
					      			</div>
					      		</div>
					      		<div class="w200">
					      			<table class="table table-striped table-style dyxm-table">
										<thead>
											<tr>
												<td style="text-align: left;padding-left: 15px!important;">手牌输入</td>
											</tr>
										</thead>
									</table>
									<input class="form-control" placeholder="输入手牌" v-model="inputHandNumCard"/>
					      		</div>
					      	</div>
					      </div>
				      	<div class="modal-footer" style="border-top-width: 1px;padding: 5px;">
					        <button type="button" class="btn btn-primary" @click="saveAccessInfo">保存</button>
					      </div>
					    </div><!-- /.modal-content -->
					  </div><!-- /.modal-dialog -->
					</div><!-- /.modal -->

					<!--票券使用信息-->
					<div class="modal fade modal-style pq-modal y-pq-modal"  tabindex="-1" id="modal2" role="dialog" data-backdrop="false" style="overflow: auto;height: 100%;">
					  <div class="modal-dialog" role="document">
					    <div class="modal-content">
					      <div class="modal-header">
					        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					        <h4 class="modal-title">票券使用信息</h4>
					      </div>
					      <div class="modal-body">
					      		<div class="flex-box">
					      			<div class="w100">使用手手机号码</div>
					      			<div class="flex-box-item">12312312312</div>
					      		</div>
					      		<div class="flex-box">
					      			<div class="w100">会员姓名</div>
					      			<div class="flex-box-item">吴改</div>
					      		</div>
					      		<div class="flex-box">
					      			<div class="w100">需补差价</div>
					      			<div class="flex-box-item">0.00</div>
					      		</div>
					      </div>
				      	  <div class="modal-footer" style="border-top-width: 1px;padding: 5px;">
					        <button type="button" class="btn btn-primary">保存</button>
					      </div>
					    </div><!-- /.modal-content -->
					  </div><!-- /.modal-dialog -->
					</div><!-- /.modal -->
					<!--票券使用信息-->
					<div class="modal fade modal-style pq-modal no-pq-modal"  tabindex="-1" id="modal3" role="dialog" data-backdrop="false" style="overflow: auto;height: 100%;">
					  <div class="modal-dialog" role="document">
					    <div class="modal-content">
					      <div class="modal-header">
					        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					        <h4 class="modal-title">票券使用信息</h4>
					      </div>
					      <div class="modal-body">
					      		<div class="flex-box">
					      			<div class="w100">使用手手机号码</div>
					      			<div class="flex-box-item">
					      				<input type="text" class="form-control" style="margin-right: 10px;padding:5px 8px;" />
					      			</div>
					      		</div>
					      		<div class="flex-box">
					      			<div class="w100">会员姓名</div>
					      			<div class="flex-box-item">--</div>
					      		</div>
					      		<div class="flex-box">
					      			<div class="w100">需补差价</div>
					      			<div class="flex-box-item">0.00</div>
					      		</div>
					      </div>
				      	  <div class="modal-footer" style="border-top-width: 1px;padding: 5px;">
					        <button type="button" class="btn btn-primary">保存</button>
					      </div>
					    </div><!-- /.modal-content -->
					  </div><!-- /.modal-dialog -->
					</div><!-- /.modal -->
					<!--输入会员凭证-->
					<div class="modal fade modal-style pq-modal pj-modal"  tabindex="-1" id="modal4" role="dialog" data-backdrop="false" style="overflow: auto;height: 100%;">
					  <div class="modal-dialog" role="document">
					    <div class="modal-content">
					      <div class="modal-header">
					        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					        <h4 class="modal-title">输入会员凭证</h4>
					      </div>
					      <div class="modal-body">
					      		<div class="flex-box">
					      			<div class="w60">手机号码</div>
					      			<div class="flex-box-item">{{inputSearch}}</div>
					      		</div>
					      		<div class="flex-box">
					      			<div class="w60">输入凭证</div>
					      			<div class="flex-box-item">
					      				<input type="text" class="form-control" style="margin-right: 10px;padding:5px 8px;" v-model="password"/>
					      			</div>
					      		</div>
					      </div>
				      	  <div class="modal-footer" style="border-top-width: 1px;padding: 5px;">
					        <button type="button" class="btn btn-primary" @click="saveTelOption">保存</button>
					      </div>
					    </div><!-- /.modal-content -->
					  </div><!-- /.modal-dialog -->
					</div><!-- /.modal -->

					<!--输入更换手牌号吗-->
					<div class="modal fade modal-style pq-modal pj-modal-1"  tabindex="-1" role="dialog" data-backdrop="false" style="overflow: auto;height: 100%;">
						<div class="modal-dialog" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
									<h4 class="modal-title">输入新的手牌号吗</h4>
								</div>
								<div class="modal-body">
									<div class="flex-box">
										<div class="w60">输入手牌号吗</div>
										<div class="flex-box-item">
											<input type="text" class="form-control" style="margin-right: 10px;padding:5px 8px;" v-model="inputHandNum"/>
										</div>
									</div>
								</div>
								<div class="modal-footer" style="border-top-width: 1px;padding: 5px;">
									<button type="button" class="btn btn-primary" @click="saveChangeHandNum">保存</button>
								</div>
							</div><!-- /.modal-content -->
						</div><!-- /.modal-dialog -->
					</div><!-- /.modal -->
				</div>
			</div>
		</div>
	</div>
	<script src="../js/jquery-3.3.1.min.js"></script>
	<script src="../js/jquery.cookie.js"></script>
	<script src="../js/extendjQuery.js"></script>
	<script src="../js/setCookie.js"></script>
	<script src="../js/dateUtil.js"></script>
	<script src="../js/combobox.js"></script>
	<script src="../js/jedate.js"></script>
	<script src="../js/vue.js"></script>
	<script src="../js/simple-calendar.js"></script>
	<script src="../js/jquery-confirm.js"></script>
	<script src="../js/jquery.fieldTime.js"></script>
	<script src="../js/bootstrap.min.js"></script>
	<script src="../js/common.js"></script>
	<script src="../js/axios.min.js"></script>
	<script src="../fitness/js/resources/api/axios-base.js"></script>
	<script src="../fitness/js/resources/constant/education-url.js"></script>
	<script src="../fitness/js/resources/constant/education-constant.js"></script>
	<script src="../js/resources/constant/course-url.js"></script>

	<script src="./js/admission/script.js"></script>

</body>

</html>